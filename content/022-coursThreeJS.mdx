---
title: "Ma√Ætriser Three.js : Guide complet pour les d√©butants"
description: "Apprends √† cr√©er des sc√®nes 3D interactives avec Three.js gr√¢ce √† ce guide d√©taill√©."
publishingAt: "2024-02-01"
---

## Introduction √† Three.js

[Three.js](https://threejs.org/) est une biblioth√®que JavaScript qui simplifie la cr√©ation de graphismes 3D dans le navigateur en utilisant WebGL. Elle permet de cr√©er des sc√®nes 3D interactives sans avoir besoin de ma√Ætriser WebGL en profondeur.

### Pourquoi utiliser Three.js ?

- üé® **Abstraction de WebGL** : √âvite la complexit√© du codage en bas niveau.
- ‚ö° **Optimis√© et performant** : S'ex√©cute directement dans le navigateur.
- üî• **Communaut√© active** : Nombreux exemples et plugins disponibles.

## Installation et configuration

Ajoute **Three.js** √† ton projet :

```bash
npm install three
```
Ensuite, cr√©e un fichier scene.js :

```typescript
import * as THREE from "three";

// Cr√©ation de la sc√®ne
const scene = new THREE.Scene();

// Cr√©ation de la cam√©ra
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.z = 5;

// Cr√©ation du rendu
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Cr√©ation d'un cube
const geometry = new THREE.BoxGeometry();
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
const cube = new THREE.Mesh(geometry, material);
scene.add(cube);

// Animation
function animate() {
  requestAnimationFrame(animate);
  cube.rotation.x += 0.01;
  cube.rotation.y += 0.01;
  renderer.render(scene, camera);
}
animate();
```

## Les bases de Three.js
### 1. Cr√©ation d'une sc√®ne

Une sc√®ne est l'environnement 3D o√π tous les objets seront plac√©s :
```typescript
const scene = new THREE.Scene();
```
### 2. Ajout d'une cam√©ra
Une cam√©ra est n√©cessaire pour visualiser la sc√®ne :
```typescript
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
```
### 3. Ajout d'un rendu WebGL
Le renderer permet d'afficher la sc√®ne sur l'√©cran :
```typescript
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);
```
### 4. Ajout d'objets 3D
Un cube peut √™tre ajout√© √† la sc√®ne avec une g√©om√©trie et un mat√©riau :
```typescript
const geometry = new THREE.BoxGeometry();
const material = new THREE.MeshBasicMaterial({ color: 0xff0000 });
const cube = new THREE.Mesh(geometry, material);
scene.add(cube);
```

## Lumi√®res et mat√©riaux
### 1. Ajout d'une lumi√®re
Les mat√©riaux plus r√©alistes n√©cessitent une lumi√®re :
```typescript
const light = new THREE.PointLight(0xffffff, 1, 100);
light.position.set(10, 10, 10);
scene.add(light);
```
### 2. Mat√©riaux avanc√©s
Three.js offre plusieurs mat√©riaux :
```typescript
const material = new THREE.MeshStandardMaterial({ color: 0x00ff00, roughness: 0.5 });
```
## Textures et environnements
### 1. Chargement d'une texture
```typescript
import { TextureLoader } from "three";

const textureLoader = new THREE.TextureLoader();
const texture = textureLoader.load("texture.jpg");

const material = new THREE.MeshBasicMaterial({ map: texture });
const plane = new THREE.Mesh(new THREE.PlaneGeometry(5, 5), material);
scene.add(plane);
```
## Ajout d'un contr√¥leur de cam√©ra
Pour interagir avec la sc√®ne, utilise OrbitControls :
```typescript
import { OrbitControls } from "three/examples/jsm/controls/OrbitControls";

const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

function animate() {
  controls.update();
  renderer.render(scene, camera);
  requestAnimationFrame(animate);
}
animate();
```
## Int√©gration avec React (React Three Fiber)
Si tu utilises React, React Three Fiber simplifie le travail :
```bash
npm install @react-three/fiber three
```
Puis, cr√©e un composant :
```typescript
import { Canvas } from "@react-three/fiber";

export default function Scene() {
  return (
    <Canvas>
      <mesh>
        <boxGeometry />
        <meshStandardMaterial color="red" />
      </mesh>
    </Canvas>
  );
}
```
## Les outils de Three.js : Guide complet

### 1. **WebGLRenderer()** 
Le **WebGLRenderer** est le moteur de rendu de Three.js qui utilise WebGL pour dessiner la sc√®ne. Il est responsable de la conversion des objets 3D en pixels affichables √† l'√©cran.

#### Param√®tres :
- `antialias` (bool√©en) : active l‚Äôanti-aliasing pour un rendu plus lisse.
- `alpha` (bool√©en) : permet un rendu avec transparence du fond.
- `precision` : sp√©cifie la pr√©cision des shaders (`"highp"`, `"mediump"`, `"lowp"`).
- `powerPreference` : Optimisation du GPU (`"default"`, `"high-performance"`, `"low-power"`).
- `logarithmicDepthBuffer` (bool√©en) : Utile pour les sc√®nes de grande profondeur.

#### Exemple :
```js
const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);
```
### 2. Gestion des couleurs et du rendu

#### ACESFilmicToneMapping
Permet d'am√©liorer le rendu des couleurs en simulant un effet cin√©matographique.
```js
renderer.toneMapping = THREE.ACESFilmicToneMapping;
renderer.toneMappingExposure = 1.2;
```
#### SRGBColorSpace
Permet d'assurer un rendu des couleurs fid√®le aux √©crans modernes.
```js
renderer.outputColorSpace = THREE.SRGBColorSpace;
```
### 3. Les Cam√©ras

#### PerspectiveCamera
Utilis√©e pour un rendu en perspective.
##### Param√®tres :
- `fov` (nombre) : Champ de vision en degr√©s.
- `aspect` (nombre) : Ratio largeur/hauteur.
- `near` (nombre) : Distance de clipping proche.
- `far` (nombre): Distance de clipping lointaine.
#### exemple :
```js
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.set(0, 5, 10);
```

## Importer des objets Blender dans Three.js

### 1. Exportation depuis Blender

Blender permet d‚Äôexporter des mod√®les 3D dans plusieurs formats compatibles avec Three.js, notamment **GLTF/GLB**, **OBJ** et **FBX**.  

Nous allons privil√©gier le format **GLTF/GLB**, car il est l√©ger et bien support√© par Three.js.

#### √âtapes :
1. Mod√©lise ton objet dans **Blender**.
2. S√©lectionne l'objet √† exporter.
3. Va dans **Fichier > Exporter > glTF 2.0 (.glb, .gltf)**.
4. Choisis **GLB (binaire)** pour un meilleur rendu et compression.
5. Enregistre le fichier dans ton projet.

---

### 2. Chargement du mod√®le dans Three.js

Une fois le fichier `.glb` export√©, utilise `GLTFLoader` pour l'importer dans Three.js :

```ts
import * as THREE from "three";
import { GLTFLoader } from "three/examples/jsm/loaders/GLTFLoader";

// Cr√©ation de la sc√®ne
const scene = new THREE.Scene();

// Ajout d'un √©clairage pour bien voir le mod√®le
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(1, 1, 1);
scene.add(light);

// Initialisation du chargeur GLTF
const loader = new GLTFLoader();
loader.load(
  "models/mon-objet.glb",
  (gltf) => {
    const model = gltf.scene;
    model.position.set(0, 0, 0);
    scene.add(model);
  },
  (xhr) => {
    console.log(`Chargement : ${(xhr.loaded / xhr.total) * 100}%`);
  },
  (error) => {
    console.error("Erreur de chargement :", error);
  }
);
```

---

### 3. Ajout d‚Äôanimations

Si ton mod√®le Blender contient des animations, Three.js peut les lire avec AnimationMixer :
```ts
let mixer: THREE.AnimationMixer;

loader.load("models/mon-objet.glb", (gltf) => {
  const model = gltf.scene;
  scene.add(model);

  mixer = new THREE.AnimationMixer(model);
  gltf.animations.forEach((clip) => {
    mixer.clipAction(clip).play();
  });
});

function animate() {
  requestAnimationFrame(animate);
  if (mixer) mixer.update(0.01);
  renderer.render(scene, camera);
}
animate();
```

---

### 4. Optimisation des mod√®les

Pour de meilleures performances : ‚úÖ R√©duis la taille du mod√®le : supprime les √©l√©ments inutiles dans Blender.
‚úÖ Utilise des textures compress√©es pour all√©ger le chargement.
‚úÖ Limite le nombre de polygones pour am√©liorer le FPS.

---

### 5. Int√©gration avec React Three Fiber

Si tu utilises React Three Fiber, l'importation est encore plus simple avec @react-three/drei :
```bash
npm install @react-three/drei @react-three/fiber three
```
Puis, charge ton mod√®le :
```ts
import { Canvas } from "@react-three/fiber";
import { useGLTF } from "@react-three/drei";

function Model() {
  const { scene } = useGLTF("/models/mon-objet.glb");
  return <primitive object={scene} />;
}

export default function Scene() {
  return (
    <Canvas>
      <ambientLight />
      <Model />
    </Canvas>
  );
}
```
## Conclusion
Three.js est une biblioth√®que puissante qui permet de cr√©er des exp√©riences 3D interactives facilement. Avec React Three Fiber, il est encore plus simple d'int√©grer des sc√®nes 3D dans des applications React.

üöÄ √Ä toi de jouer ! Teste Three.js et cr√©e des exp√©riences immersives !

Ce guide donne une **introduction compl√®te** √† Three.js avec du **code clair** et une **progression logique** pour apprendre √† cr√©er une sc√®ne 3D de base. üöÄ

```
```